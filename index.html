# Create a tiny Supabase smoke-test page you can upload to your repo root
# and visit at /supabase-quick-test.html to verify your URL/key + table.
test_html = """<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Supabase Quick Test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>body{font-family:system-ui,Segoe UI,Arial;margin:2rem}pre{background:#111;color:#0f0;padding:1rem;border-radius:.5rem;white-space:pre-wrap}</style>
</head>
<body>
  <h1>Supabase Quick Test</h1>
  <p>This page signs in anonymously, lists <code>proposals</code>, and shows any errors.</p>
  <div id="status">Starting…</div>
  <pre id="out"></pre>
  <script>
    const SUPABASE_URL = "https://nqzyoegnquyqfngmaktn.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5xenlvZWducXV5cWZuZ21ha3RuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NTkzNzYsImV4cCI6MjA3NDQzNTM3Nn0.lcQ8VW3zSdvyoZkJbhnT3CeyeYbxswEiAhZnAjo5Lac";
    const db = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    const out = document.getElementById('out');
    const status = (m)=> document.getElementById('status').textContent = m;
    (async function(){
      try{
        status("Signing in anonymously…");
        const { data: u, error: ue } = await db.auth.signInAnonymously();
        if (ue) throw ue;
        status("Auth OK. Fetching proposals…");
        const { data, error } = await db.from("proposals").select("name, created_at").limit(10);
        if (error) throw error;
        status("Success ✅");
        out.textContent = JSON.stringify(data, null, 2);
      }catch(e){
        status("Error ❌");
        out.textContent = (e && e.message) ? e.message : String(e);
      }
    })();
  </script>
</body>
</html>
"""
path = "/mnt/data/supabase-quick-test.html"
with open(path, "w") as f:
    f.write(test_html)
path
